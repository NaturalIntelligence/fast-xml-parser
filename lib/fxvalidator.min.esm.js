var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{t:()=>l});var r=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",n=new RegExp("^["+r+"]["+r+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),a=function(e){return!(null==n.exec(e))},i={allowBooleanAttributes:!1,unpairedTags:[]};function l(e,t){t=Object.assign({},i,t);var r=[],n=!1,l=!1;"\ufeff"===e[0]&&(e=e.substr(1));for(var g=0;g<e.length;g++)if("<"===e[g]&&"?"===e[g+1]){if((g=o(e,g+=2)).err)return g}else{if("<"!==e[g]){if(u(e[g]))continue;return p("InvalidChar","char '"+e[g]+"' is not expected.",m(e,g))}var s=g;if("!"===e[++g]){g=f(e,g);continue}var v=!1;"/"===e[g]&&(v=!0,g++);for(var b="";g<e.length&&">"!==e[g]&&" "!==e[g]&&"\t"!==e[g]&&"\n"!==e[g]&&"\r"!==e[g];g++)b+=e[g];if("/"===(b=b.trim())[b.length-1]&&(b=b.substring(0,b.length-1),g--),!a(b))return p("InvalidTag",0===b.trim().length?"Invalid space after '<'.":"Tag '"+b+"' is an invalid name.",m(e,g));var F=d(e,g);if(!1===F)return p("InvalidAttr","Attributes for '"+b+"' have open quote.",m(e,g));var I=F.value;if(g=F.index,"/"===I[I.length-1]){var x=g-I.length,A=h(I=I.substring(0,I.length-1),t);if(!0!==A)return p(A.err.code,A.err.msg,m(e,x+A.err.line));n=!0}else if(v){if(!F.tagClosed)return p("InvalidTag","Closing tag '"+b+"' doesn't have proper closing.",m(e,g));if(I.trim().length>0)return p("InvalidTag","Closing tag '"+b+"' can't have attributes or invalid starting.",m(e,s));if(0===r.length)return p("InvalidTag","Closing tag '"+b+"' has not been opened.",m(e,s));var C=r.pop();if(b!==C.tagName){var T=m(e,C.tagStartPos);return p("InvalidTag","Expected closing tag '"+C.tagName+"' (opened in line "+T.line+", col "+T.col+") instead of closing tag '"+b+"'.",m(e,s))}0==r.length&&(l=!0)}else{var w=h(I,t);if(!0!==w)return p(w.err.code,w.err.msg,m(e,g-I.length+w.err.line));if(!0===l)return p("InvalidXml","Multiple possible root nodes found.",m(e,g));-1!==t.unpairedTags.indexOf(b)||r.push({tagName:b,tagStartPos:s}),n=!0}for(g++;g<e.length;g++)if("<"===e[g]){if("!"===e[g+1]){g=f(e,++g);continue}if("?"!==e[g+1])break;if((g=o(e,++g)).err)return g}else if("&"===e[g]){var D=c(e,g);if(-1==D)return p("InvalidChar","char '&' is not expected.",m(e,g));g=D}else if(!0===l&&!u(e[g]))return p("InvalidXml","Extra text at the end",m(e,g));"<"===e[g]&&g--}return n?1==r.length?p("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",m(e,r[0].tagStartPos)):!(r.length>0)||p("InvalidXml","Invalid '"+JSON.stringify(r.map((function(e){return e.tagName})),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):p("InvalidXml","Start tag expected.",1)}function u(e){return" "===e||"\t"===e||"\n"===e||"\r"===e}function o(e,t){for(var r=t;t<e.length;t++)if("?"!=e[t]&&" "!=e[t]);else{var n=e.substr(r,t-r);if(t>5&&"xml"===n)return p("InvalidXml","XML declaration allowed only at the start of the document.",m(e,t));if("?"==e[t]&&">"==e[t+1]){t++;break}}return t}function f(e,t){if(e.length>t+5&&"-"===e[t+1]&&"-"===e[t+2]){for(t+=3;t<e.length;t++)if("-"===e[t]&&"-"===e[t+1]&&">"===e[t+2]){t+=2;break}}else if(e.length>t+8&&"D"===e[t+1]&&"O"===e[t+2]&&"C"===e[t+3]&&"T"===e[t+4]&&"Y"===e[t+5]&&"P"===e[t+6]&&"E"===e[t+7]){var r=1;for(t+=8;t<e.length;t++)if("<"===e[t])r++;else if(">"===e[t]&&0==--r)break}else if(e.length>t+9&&"["===e[t+1]&&"C"===e[t+2]&&"D"===e[t+3]&&"A"===e[t+4]&&"T"===e[t+5]&&"A"===e[t+6]&&"["===e[t+7])for(t+=8;t<e.length;t++)if("]"===e[t]&&"]"===e[t+1]&&">"===e[t+2]){t+=2;break}return t}var g='"',s="'";function d(e,t){for(var r="",n="",a=!1;t<e.length;t++){if(e[t]===g||e[t]===s)""===n?n=e[t]:n!==e[t]||(n="");else if(">"===e[t]&&""===n){a=!0;break}r+=e[t]}return""===n&&{value:r,index:t,tagClosed:a}}var v=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function h(e,t){for(var r=function(e,t){for(var r=[],n=t.exec(e);n;){var a=[];a.startIndex=t.lastIndex-n[0].length;for(var i=n.length,l=0;l<i;l++)a.push(n[l]);r.push(a),n=t.exec(e)}return r}(e,v),n={},a=0;a<r.length;a++){if(0===r[a][1].length)return p("InvalidAttr","Attribute '"+r[a][2]+"' has no space in starting.",F(r[a]));if(void 0!==r[a][3]&&void 0===r[a][4])return p("InvalidAttr","Attribute '"+r[a][2]+"' is without value.",F(r[a]));if(void 0===r[a][3]&&!t.allowBooleanAttributes)return p("InvalidAttr","boolean attribute '"+r[a][2]+"' is not allowed.",F(r[a]));var i=r[a][2];if(!b(i))return p("InvalidAttr","Attribute '"+i+"' is an invalid name.",F(r[a]));if(n.hasOwnProperty(i))return p("InvalidAttr","Attribute '"+i+"' is repeated.",F(r[a]));n[i]=1}return!0}function c(e,t){if(";"===e[++t])return-1;if("#"===e[t])return function(e,t){var r=/\d/;for("x"===e[t]&&(t++,r=/[\da-fA-F]/);t<e.length;t++){if(";"===e[t])return t;if(!e[t].match(r))break}return-1}(e,++t);for(var r=0;t<e.length;t++,r++)if(!(e[t].match(/\w/)&&r<20)){if(";"===e[t])break;return-1}return t}function p(e,t,r){return{err:{code:e,msg:t,line:r.line||r,col:r.col}}}function b(e){return a(e)}function m(e,t){var r=e.substring(0,t).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function F(e){return e.startIndex+e[1].length}var I=t.t;export{I as validate};
//# sourceMappingURL=fxvalidator.min.esm.js.map