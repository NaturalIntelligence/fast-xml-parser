{"version":3,"sources":["webpack/bootstrap","external \"./package.json\"","external \"./parser\"","./src/cli.js","./src/read.js","external \"fs\"","external \"stream\""],"names":["fs","require","parser","readToEnd","writeToFile","fileName","data","writeFile","err","console","log","process","argv","version","options","ignoreNameSpace","ignoreAttributes","parseNodeValue","parseAttributeValue","outputFileName","validate","validateOnly","i","length","callback","xmlData","output","result","JSON","stringify","parse","stdin","readFile","e","Transform","ReadToEnd","opts","_rte_encoding","encoding","_buff","chunk","done","toString","push","emit","undefined","stream","cb","destStream","pipe","on","unpipe","resume","module","exports"],"mappings":"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","file":"./parser.cli.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading wasm modules\n \tvar installedWasmModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// object with all compiled WebAssembly.Modules\n \t__webpack_require__.w = {};\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/cli.js\");\n","module.exports = require(\"./package.json\");","module.exports = require(\"./parser\");","const fs = require(\"fs\");\nconst parser = require(\"./parser\");\nconst {readToEnd} = require(\"./read\");\n\nconst writeToFile = (fileName, data) => {\n    fs.writeFile(fileName, data, (err) => {\n        if (err) {\n            throw err;\n        }\n        console.log(\"JSON output has been written to \" + fileName);\n    });\n};\n\nif (process.argv[2] === \"--help\" || process.argv[2] === \"-h\") {\n    console.log(`\\\nFast XML Parser ${require(\"../package.json\").version}\n----------------\nxml2js [-ns|-a|-c|-v|-V] <filename> [-o outputFile.json]\ncat xmlFile.xml | xml2js [-ns|-a|-c|-v|-V] [-o outputFile.json]\n-ns: remove namespace from tag and attribute name.\n-a: don't parse attributes.\n-c: parse values to primitive type.\n-v: validate before parsing.\n-V: validate only.\\\n`);\n} else if (process.argv[2] === \"--version\") {\n    console.log(require(\"../package.json\").version);\n} else {\n    const options = {\n        ignoreNameSpace: true,\n        ignoreAttributes: false,\n        parseNodeValue: true,\n        parseAttributeValue: true\n    };\n    let fileName = \"\";\n    let outputFileName;\n    let validate = false;\n    let validateOnly = false;\n    for (let i = 2; i < process.argv.length; i++) {\n        if (process.argv[i] === \"-ns\") {\n            options.ignoreNameSpace = false;\n        } else if (process.argv[i] === \"-a\") {\n            options.ignoreAttributes = true;\n        } else if (process.argv[i] === \"-c\") {\n            options.parseNodeValue = false;\n            options.parseAttributeValue = false;\n        } else if (process.argv[i] === \"-o\") {\n            outputFileName = process.argv[++i];\n        } else if (process.argv[i] === \"-v\") {\n            validate = true;\n        } else if (process.argv[i] === \"-V\") {\n            validateOnly = true;\n        } else {//filename\n            fileName = process.argv[i];\n        }\n    }\n    const callback = (xmlData) => {\n        let output = \"\";\n        if (validate) {\n            const result = parser.validate(xmlData);\n            if (result === true) {\n                output = JSON.stringify(parser.parse(xmlData, options), null, 4);\n            } else {\n                output = result;\n            }\n        } else if (validateOnly) {\n            output = parser.validate(xmlData);\n        } else {\n            output = JSON.stringify(parser.parse(xmlData, options), null, 4);\n        }\n        if (outputFileName) {\n            writeToFile(outputFileName, output);\n        } else {\n            console.log(output);\n        }\n    };\n\n    try {\n        if (!fileName) {\n            readToEnd(process.stdin, (err, data) => {\n                if (err) {\n                    throw err;\n                }\n                callback(data);\n            });\n        } else {\n            fs.readFile(fileName, (err, data) => {\n                if (err) {\n                    throw err;\n                }\n                callback(data);\n            });\n        }\n    }\n    catch (e) {\n        console.log(\"Seems an invalid file or stream.\" + e);\n    }\n}\n","// Copyright 2013 Timothy J Fontaine <tjfontaine@gmail.com>\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the 'Software'), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE\n\n/*\n\nRead any stream all the way to the end and trigger a single cb\n\nconst http = require('http');\n\nconst rte = require('readtoend');\n\nhttp.get('http://nodejs.org', function(response) {\n  rte.readToEnd(response, function(err, body) {\n    console.log(body);\n  });\n});\n\n*/\n\nconst {Transform} = require(\"stream\");\n\nclass ReadToEnd extends Transform {\n    constructor(opts) {\n        super(opts);\n        this._rte_encoding = opts.encoding || \"utf8\";\n        this._buff = \"\";\n    }\n\n    _transform(chunk, encoding, done) {\n        this._buff += chunk.toString(this._rte_encoding);\n        this.push(chunk);\n        done();\n    }\n\n    _flush(done) {\n        this.emit(\"complete\", undefined, this._buff);\n        done();\n    }\n}\n\nconst readToEnd = (stream, options, cb) => {\n    if (!cb) {\n        cb = options;\n        options = {};\n    }\n\n    const destStream = new ReadToEnd(options);\n\n    stream.pipe(destStream);\n\n    stream.on(\"error\", function(err) {\n        stream.unpipe(destStream);\n        cb(err);\n    });\n\n    destStream.on(\"complete\", cb);\n\n    destStream.resume();\n\n    return destStream;\n};\n\nmodule.exports = {ReadToEnd, readToEnd};\n","module.exports = require(\"fs\");","module.exports = require(\"stream\");"],"sourceRoot":""}